<!DOCTYPE html>
<html lang="en">
<head>
    <title>Events</title>
    <%- include("./headers/forms.ejs") %>
</head>

<body id="page-top">
    <div id="wrapper">
        
        <%- include("./panels/admin-panel.ejs") %> 
        
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">
                
                <%- include("./headers/top-container.ejs") %> 

                <div class="container-fluid">
                    <div class="d-sm-flex justify-content-between align-items-center mb-4">
                        <h3 class="text-dark mb-0">General Events</h3>
                        <div class="right">
                            <!-- <form action="/<%=school%>/admin/create_event" method="GET"> -->
                                <button class="learn-more button" type="submit" data-bs-toggle="modal" data-bs-target="#createImageModal" >
                                    <span class="circle" aria-hidden="true" >
                                        <span class="icon arrow"></span>
                                    </span>
                                    <span class="button-text">Create Event</span>
                                </button>
                                <%- include("./modals/create-event.ejs") %> 
                                <!-- <button class="btn btn-primary" type="submit">CREATE EVENT</button> -->
                            <!-- </form> -->
                        </div>
                    </div>
                    <div class="row">
                        <ul>
                            <% events.forEach(function(evt){ %> 
                                <li class="booking-card pb-0" style= "background-image: url(&quot;/images/events/<%= Math.floor(Math.random()*8) %>.jpg&quot;) ; box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;" >
                                    <div class="book-container">
                                      <div class="content">
                                        <form action="<%="/" + school + "/admin/delete_event"%>" method="POST">
                                            <button class="btn" name="event" value="<%=evt._id%>" type="submit">Delete Event</button>
                                        </form>
                                      </div>
                                    </div>
                                    <div class="informations-container">
                                      <h2 class="title"><%= evt.summary.charAt(0).toUpperCase() + evt.summary.slice(1) %> </h2>
                                      <p class="sub-title mb-0"><%= evt.description.charAt(0).toUpperCase() + evt.description.slice(1) %> </p>
                                      
                                      <div class="more-information">
                                        <div class="info-and-date-container">
                                          <div class="box info">
                                            <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="video" class="svg-inline--fa fa-video fa-w-18 icon" role="img" xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" viewBox="0 0 576 512"><path fill="currentColor" d="M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"></path></svg>
                                            <a class="prevdef" href="<%= evt.meetlink %>" target="_blank" style="font-size: 1em;"><p class="pb-0 prevdef" style="margin-top: 20px;">Join Meet  Here</p></a></p>
                                          </div>
                                          <div class="box date">
                                            <svg class="icon" style="width:24px;height:24px" viewBox="0 0 24 24">
                                      <path fill="currentColor" d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z" />
                                  </svg>
                                  <a class="prevdef" href="<%= evt.eventlink %>" target="_blank" style="font-size: 1em;"><p class="pb-0 prevdef" style="margin-top: 20px;"> <%= evt.start.toDateString() %>  <br>  <%= evt.start.toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true }) %>  </p></a></p>
                                          </div>
                                        </div>
                                        </div>
                                    </div>
                                  </li>
                            <% }) %>
                        </ul>
                        
                         
                    </div>
                </div>
            </div>

            <%- include("./footers/dashboard.ejs") %> 
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
            </script>
    </div>
</body>
</html>