<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Login Page</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>


    <link rel="stylesheet" href="/css/dashboard.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/fontawesome5-overrides.min.css">

    <style>
        body {
  font-family: "Open Sans", Arial, sans-serif;
  line-height: 1.5;
  font-size: 16px;
  color: #848484;
  background-color: #f0f0f0;
}
body.style-2 {
  background-color: #ffffff;
  background-size: cover;
  background-position: -30% center;
  background-repeat: no-repeat;
  background-image: url(../images/bg_2.jpg);
  height: 100%;
}
body.style-3 {
  background: #ffffff url(../images/geometry2.png) repeat;
}

a {
  color: #848484;
  -moz-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;
  -webkit-transition: all 0.3s ease;
  -ms-transition: all 0.3s ease;
  transition: all 0.3s ease;
}
a:hover {
  color: #61128c;
}

.menu {
  padding: 0;
  margin: 30px 0 0 0;
}
.menu li {
  list-style: none;
  margin-bottom: 10px;
  display: -moz-inline-stack;
  display: inline-block;
  zoom: 1;
  *display: inline;
}
.menu li a {
  padding: 5px;
}
.menu li.active a {
  color: #b3b3b3;
}

.fh5co-form {
  padding: 30px;
  -webkit-box-shadow: -4px 7px 46px 2px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: -4px 7px 46px 2px rgba(0, 0, 0, 0.1);
  -o-box-shadow: -4px 7px 46px 2px rgba(0, 0, 0, 0.1);
  box-shadow: -4px 7px 46px 2px rgba(0, 0, 0, 0.1);
  background: #ffffff;
}
.style-2 .fh5co-form {
  -webkit-box-shadow: -4px 7px 46px 2px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: -4px 7px 46px 2px rgba(0, 0, 0, 0.1);
  -o-box-shadow: -4px 7px 46px 2px rgba(0, 0, 0, 0.1);
  box-shadow: -4px 7px 46px 2px rgba(0, 0, 0, 0.1);
}
@media screen and (max-width: 768px) {
  .fh5co-form {
    padding: 15px;
  }
}
.fh5co-form h2 {
  text-transform: uppercase;
  letter-spacing: 2px;
  font-size: 20px;
  margin: 0 0 30px 0;
  color: #000000;
}
.fh5co-form .form-group {
  margin-bottom: 30px;
}
.fh5co-form .form-group p {
  font-size: 14px;
  color: #9f9f9f;
  font-weight: 300;
}
.fh5co-form .form-group p a {
  color: #000000;
}
.fh5co-form label {
  font-weight: 300;
  font-size: 14px;
  font-weight: 300;
}
.fh5co-form .form-control {
  font-size: 16px;
  font-weight: 300;
  height: 50px;
  padding-left: 0;
  padding-right: 0;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  -webkit-box-shadow: none;
  -moz-box-shadow: none;
  -o-box-shadow: none;
  box-shadow: none;
  -webkit-border-radius: 0px;
  -moz-border-radius: 0px;
  -ms-border-radius: 0px;
  border-radius: 0px;
  -moz-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;
  -webkit-transition: all 0.3s ease;
  -ms-transition: all 0.3s ease;
  transition: all 0.3s ease;
}
.fh5co-form .form-control::-webkit-input-placeholder {
  color: rgba(0, 0, 0, 0.3);
  text-transform: uppercase;
}
.fh5co-form .form-control::-moz-placeholder {
  color: rgba(0, 0, 0, 0.3);
  text-transform: uppercase;
}
.fh5co-form .form-control:-ms-input-placeholder {
  color: rgba(0, 0, 0, 0.3);
  text-transform: uppercase;
}
.fh5co-form .form-control:-moz-placeholder {
  color: rgba(0, 0, 0, 0.3);
  text-transform: uppercase;
}
.fh5co-form .form-control:focus, .fh5co-form .form-control:active {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.btn-primary {
  height: 50px;
  padding-right: 20px;
  padding-left: 20px;
  border: none;
  background: #61128c;
  color: #ffffff;
  -webkit-box-shadow: -2px 10px 20px -1px rgba(97,18,118, 0.4);
  -moz-box-shadow: -2px 10px 20px -1px rgba(97,18,118, 0.4);
  -o-box-shadow: -2px 10px 20px -1px rgba(97,18,118, 0.4);
  box-shadow: -2px 10px 20px -1px rgba(97,18,118, 0.4);
}
.btn-primary:hover, .btn-primary:focus, .btn-primary:active {
  color: #ffffff;
  background: #61128c !important;
  outline: none;
}

input, textarea {
  color: #000;
}

.placeholder {
  color: #aaa;
}

.js .animate-box {
  opacity: 0;
}

    </style>
</head>

<body class="bg-gradient-primary">
    <br><br>
    <div class="container">
        <div class="card shadow-lg o-hidden border-0 my-5">
            <div class="card-body p-0">
                <div class="row">
                    <div class="col-lg-5 d-none d-lg-flex">
                        <div class="flex-grow-1 bg-register-image"
                            style="background-image: url(&quot;/images/university.jpg&quot;);"></div>
                    </div>
                    <div class="col-lg-7">
                        <div class="p-5">
                            <div class="text-center">
                                <br>
                                <h4 class="text-dark mb-4">Welcome to <%= schoolname %></h4>
                            </div>
                            <form class="user" id="login_form" method="POST" onsubmit='sub(event)'>
                                <div class="form-group">
                                    <input id="username" class="form-control form-control-user login-input" type="text"
                                        placeholder="Username" name="username" required>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-12 mb-6 mb-sm-0">
                                        <input id="password" class="form-control form-control-user login-input"
                                            type="password" placeholder="Password" name="password" required>
                                    </div>
                                </div>
                                <div id="username-feedback" class="invalid-feedback" style="display: none;">
                                    *No user found
                                </div>
                                <div id="password-feedback" class="invalid-feedback" style="display: none;">
                                    *Bad Credentials
                                </div>
                                <button class="btn btn-primary btn-block text-white btn-user" type="submit"
                                    name="button" value="login">Login</button>
                            </form><br>
                            <div class="text-center"><a class="small" data-bs-toggle="modal" data-bs-target="#exampleModal" href="#"  >Forgot
                                    Password?</a></div>

                                <!-- Modal -->
                                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <!-- <div class="modal-body"> -->
                                            
                                            <form action="/<%= schoolname %>/forgot-password " method="POST" class="fh5co-form animate-box" data-animate-effect="fadeIn">
                                                <button type="button" class="btn-close float-right" data-bs-dismiss="modal" aria-label="Close"></button>
                                                <h2 class="modal-title" id="exampleModalLabel">Reset Password</h2>
                                                
                                                <div class="form-group">
                                                    <label for="username" class="sr-only">Username</label>
                                                    <input type="text" class="form-control" id="username" placeholder="Username" autocomplete="off" name="username">
                                                </div>
                                                <div class="form-group">
                                                    <label for="email" class="sr-only">E-Mail</label>
                                                    <input type="email" class="form-control" id="password" placeholder="E-Mail" autocomplete="off" name="email">
                                                </div>
                                                <div class="form-group">
                                                    <button type="submit" class="btn btn-primary">Submit</button>
                                                </div>
                                            </form>
                                            <script src="" async defer></script>
                                    </div>
                                    </div>

                                    
                                      <!-- <label >Enter Username</label>
                                      <input type="text" name="username">
                                      <br>
                                      <label >Enter email</label>
                                      <input type="email" name="email">
                                      <button type="submit">Submit</button>
                                  </form>
                                  <script src="" async defer></script> -->

                                </div>

                            <br><br><br><br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
    <script src="/javascript/dashboard.min.js"></script>
    <script>
        var shortname = '<%-shortname%>';

        function sub(event) {
            event.preventDefault();
            $.ajax({
                url: '/' + shortname,
                type: 'post',
                data: {
                    username: $('#username').val(),
                    password: $('#password').val(),
                    button: 'login',
                },
                success: function (response) {
                    console.log(response.message);
                    if (response.message == "User not found") {
                        $('#username-feedback')[0].style.display = "block";
                    } else {
                        $('#username-feedback')[0].style.display = "none";
                    }

                    if (response.message == "Bad Credentials") {
                        $('#password-feedback')[0].style.display = "block";
                    } else {
                        $('#password-feedback')[0].style.display = "none";
                    }

                    if (response.message == "admin") {
                        window.location.replace("/" + shortname + "/admin/dashboard");
                    }

                    if (response.message == "professor") {
                        window.location.replace("/" + shortname + "/professor/dashboard");
                    }

                    if (response.message == "student") {
                        window.location.replace("/" + shortname + "/student/dashboard");
                    }

                    if (!response) {
                        windows.location.reload();
                    }
                }
            });

        }
    </script>
</body>

</html>