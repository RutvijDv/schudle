<!-- Modal -->
<div class="modal fade" id="changeImageModal" tabindex="-1" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog modal-dialog-centered">
  <div class="modal-content">
    <!-- <div class="modal-body"> -->
    <form action="/<%=school%>/profile/change_photo" method="POST" enctype="multipart/form-data" class="fh5co-form animate-box"
      data-animate-effect="fadeIn" onsubmit='forgot(event)'>
      <button type="button" class="btn-close float-right" data-bs-dismiss="modal"
        aria-label="Close"></button>
      <h2 class="modal-title" id="exampleModalLabel">Change Profile Image</h2>

      <div class="form-group">
        <label for="Image" class="sr-only">Profile Image</label>  
        <img id="blah" src="data:image/<%=info.profileimg.contentType%>;base64,
        <%=info.profileimg.data.toString('base64')%>" width="160" height="160" alt="your image" >    
      </div>
      
      <div class="form-group">
        <label class="profile-file">
          <input type="file" name="file" ref="upload" id="imgInp" aria-label="File Input" onchange="getFileName()">
          <span class="profileFile-custom"></span>
        </label>
        <h6 id="fileName"  style="text-align:left;"><span class="nofile" >No files Selected</span></h6>
      </div>
      
      <div class="form-group">
        <button type="submit" class="btn btn-primary">Upload</button>
      </div>
    </form>
  </div>
</div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah')
                    .attr('src', e.target.result);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }

    $("#imgInp").change(function() {
        readURL(this);
    });

    function getFileName()
    {
        var x = document.getElementById('imgInp');
        document.getElementById('fileName').innerHTML = x.value.split('\\').pop();
    }
</script>
